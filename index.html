<!DOCTYPE html>
<html>
  <head>
    <title>JS form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="index.css" />
    <script>
      const code="r6hodFq";
      let array = [
        {
          id: 100,
          name: "Shaheen",
          email: "shaheen@tapflow.app",
          password: "012345678",
        },
        {
          id: 101,
          name: "Yasmin",
          email: "yasmin@tapflow.app",
          password: "ABCDEFGHIJK",
        },
        {
          id: 102,
          name: "ahmad",
          email: "ahmad@tapflow.app",
          password: "a1b2c3d4e5",
        },
        {
          id: 103,
          name: "hamzah",
          email: "hamzah@tapflow.app",
          password: "000000000",
        },
      ];
      function checkUser()  {
        
    const emailInput = document.getElementById("email").value;
    const passwordInput = document.getElementById("password").value;
    const codeInput = document.getElementById("code").value;
    const errorMSG = document.getElementById("errorMSG");
    const successMSG = document.getElementById("successMSG");
    let flag=0;
    setTimeout(() => {
        
      if (emailInput === "") {
        document.getElementById("email").classList.add("error-input");
        flag=1;
      } else {
        document.getElementById("email").classList.remove("error-input");
        flag=0;
      }
    }, 3000);
    setTimeout(() => {
  if (passwordInput === "") {
    document.getElementById("password").classList.add("error-input");
    flag=1;
  } else {
    document.getElementById("password").classList.remove("error-input");
    flag=0;
  }
}, 3000);
    setTimeout(() => {
  if (codeInput === "") {
    document.getElementById("code").classList.add("error-input");
    flag=1;
  } else {
    document.getElementById("code").classList.remove("error-input");
    flag=0;
  }
}, 3000);
    



    let elem = document.createElement("img");
    elem.src ="https://upload.wikimedia.org/wikipedia/commons/a/ad/YouTube_loading_symbol_3_%28transparent%29.gif?20140201131911";
    document.getElementById("loadingBTN").appendChild(elem);
    document.getElementById("loadingBTN").disabled = true;
    const myTimeout = setTimeout(disableBTN, 3000); 


    // Check if the email exists in the array
    const user = array.find((user) => user.email === emailInput);
    errorMSG.innerHTML = "";
        successMSG.innerHTML = "";
    if (user) {
      // Email exists, now check the code and password
      setTimeout(() => {
        

       
          if (user.password === passwordInput) {
            if(codeInput === code){
            successMSG.innerHTML = "Login successful!";
          } else{
            errorMSG.innerHTML = "Incorrect Security Code";
            if(flag===1){errorMSG.innerHTML = "Please fill out the indicated fields";}

          }}
          else {
            // Password is incorrect, show an error message after a 3-second delay
            errorMSG.innerHTML = "Incorrect password. Please try again.";
            if(flag===1){errorMSG.innerHTML = "Please fill out the indicated fields";}
          } 
      }, 3000);
    } else {
      // Email does not exist, show an error message after a 3-second delay
      setTimeout(() => {
        errorMSG.innerHTML = "Email not found. Please try another email.";
        if(flag===1){errorMSG.innerHTML = "Please fill out the indicated fields";}
      }, 3000);
    }
  }

  

      
      
      function disableBTN(){
        
        document.getElementById("loadingBTN").innerHTML="Login "; 
      
        document.getElementById("loadingBTN").disabled = false;
      }
    </script>
  </head>
  <body>
    <div class="container-fluid header">
      <div class="row">
        <div class="col-12">
          <img src="Logo.svg" class="logo" />
        </div>
      </div>
    </div>
    <div class="container-fluid formSection">
      <div class="row">
        <div class="col-12">
          <div class="whiteForm">
            <div class="row">
              <div class="col-12">
                <h1 class="fromTitle">Login form</h1>
              </div>
              <div class="col-12 inputCol">
                <label class="label">Email</label>
                <input
                  type="email"
                  class="input"
                  placeholder="Example@example.com"
                  id="email"
                  required
                />
              </div>
              <div class="col-12 inputCol">
                <label class="label">Password</label>
                <input
                  type="password"
                  class="input"
                  placeholder="Minimum 8 Characters"
                  id="password"
                  required
                />
              </div>
              <div class="col-12 inputCol">
                <label class="label"
                  ><strong>SECURITY TEST.</strong> What are the characters in
                  the image below?</label
                >
                <img src="code.png" class="img-fluid codeIMG" />
                <input type="text" class="input" id="code" required/>
              </div>
              <div class="col-12 inputCol">
                <p class="errorMSG" id="errorMSG"></p>
                <p class="successMSG" id="successMSG"></p>
              </div>
              <div class="col-2">
                <button
                  class="orangeSubmit"
                  id="loadingBTN"
                  onclick="checkUser()"
                 
                >
                  Login
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


